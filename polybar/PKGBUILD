# Maintainer: Matt Glen <mwg2202@gmail.com>
pkgname=mwglen-polybar
pkgver=1
pkgrel=1
pkgdesc="A polybar configuration"
arch=('x86_64')
url="https://github.com/mwglen/arch-config/polybar"
license=('GPL')
source=('config.ini' 'redshift.sh' 'spotify.sh' 'env.sh')
md5sums=('SKIP')
depends=('polybar-git') # polybar-git is used for the wm-restack=generic feature

package() { 
    config_dir="${XDG_CONFIG_HOME:-~/.config}"
    mkdir -p $pkgdir/$config_dir/polybar/scripts
    cp config.ini $pkgdir/$config_dir/polybar
    cp spotify.sh $pkgdir/$config_dir/polybar/scripts
    cp redshift.sh $pkgdir/$config_dir/polybar/scripts
    cp env.sh $pkgdir/$config_dir/polybar/scripts

    # Give polybar access to change backlight
    sudo mkdir -p /etc/udev/rules.d
    groupadd -r video && true
    sudo usermod -a -G video $USER
    sudo chgrp video /sys/class/backlight/intel_backlight/brightness
    sudo chmod g+w /sys/class/backlight/intel_backlight/brightness

}
